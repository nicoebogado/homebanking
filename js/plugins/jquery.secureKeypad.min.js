!function(s){function u(t,n){t.parent().parent().find("button.sk-btn-num").each(function(t,e){s(e).text("show"===n?s(e).val():"*")})}function i(t){var e,n=o([0,1,2,3,4,5,6,7,8,9]),a=o(["A","B","C","D"]);return"<div>"+r(a[0],t)+r(a[1],t)+r(a[2],t)+r(a[3],t)+"</div><div>"+r(n[0],t)+r(n[1],t)+r(n[2],t)+r(n[3],t)+"</div><div>"+r(n[4],t)+r(n[5],t)+r(n[6],t)+r(n[7],t)+"</div><div>"+r(n[8],t)+r(n[9],t)+('<button class="sk-btn-del '+((e=t)?"btn btn-"+e:"")+'" type="button" value="del" style="width: 88px; height: 44px">Borrar</button>')+"</div>"}function r(t,e){return'<button class="'+("sk-btn-num "+(e?"btn btn-"+e:""))+'" type="button" value="'+t+'" style="width: 44px; height: 44px">'+t+"</button>"}function o(t){for(var e,n,a=t.length;a;e=Math.floor(Math.random()*a),n=t[--a],t[a]=t[e],t[e]=n);return t}function n(t,e){var n=t.prop("id")+"-error",a='<div id="'+n+'" class="help-block ">'+e+"</label>";s("#"+n).remove(),t.parent().append(a).parent().addClass("has-error")}s.fn.secureKeypad=function(t){var o=s.extend({},s.fn.secureKeypad.defaults,t);return this.each(function(t,a){var r=s(this);r.attr("readonly",!0);var e=s('<div class="sk-keypad">').append(i(o.bootstrapClass)).on("mousemove","button.sk-btn-num",function(t){u(s(this),"hide")}).on("mouseleave","button.sk-btn-num",function(t){u(s(this),"show")}).on("click","button",function(t){var e=s(this).val(),n=s(a).val();r.data("hashed",!1),"del"==e?s(a).val(""):s(a).val(n+e),s(this).parent().parent().html(i(o.bootstrapClass)),u(s(this),"show")});r.after(e),r.closest("form").submit(function(){if(!r.data("hashed")){if(o.validate&&!function(t){if(t.val().length<6)return n(t,"La clave debe tener por lo menos 6 dígitos."),!1;if(null===(m=/(?=.*[0-9])/.exec(t.val())))return n(t,"La clave debe tener por lo menos un número."),!1;if(null===(m=/(?=.*[A-D])/.exec(t.val())))return n(t,"La clave debe tener por lo menos una letra."),!1;if(function(t){for(var e in t)if(t[+e]==t[+e+1])return!0;for(var e in t)if(+t[+e+1]==+t[e]+1)return!0;for(var e in t)if(String.fromCharCode(t.charCodeAt(e)+1)==t[+e+1])return!0;return!1}(t.val()))return n(t,"La clave no debe poseer números o letras consecutivas."),!1;return!0}(r))return!1;var t=sha256(md5(r.val()).toLowerCase());r.val(t).data("hashed",!0)}})})},s.fn.secureKeypad.defaults={bootstrapClass:"default",validate:!1}}(jQuery);